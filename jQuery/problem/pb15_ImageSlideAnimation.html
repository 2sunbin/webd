<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>이미지 슬라이드</title>
    <link rel="stylesheet" href="reset.css">
    <script src="https://code.jquery.com/jquery.min.js"></script>
    <style>
        /* 움직이는 슬라이드 */
        #slide {
            width: 960px;
            border: 20px solid orangered;
            margin: 100px auto;
            overflow: hidden;
            position: relative;
        }
        #slide > ul {
            display: flex;
            width: 500%;
        }
        #slide > ul >li {
            width: 20%;
        }
        #slide > ul > li > img {
            display: block;
            width: 100%;
        }

        /* 이전, 다음 슬라이드로 움직이는 버튼 */
        #prev {
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;

            width: 30%;

            opacity: 0.7;
            
            background-image: url('https://i.imgur.com/DBK27Kx.png');
            background-repeat: no-repeat;
            background-position: left;

        }
        #next {
            position: absolute;
            top: 0;
            bottom: 0;
            right: 0;

            width: 30%;

            opacity: 0.7;
            
            background-image: url('https://i.imgur.com/pw4Yfrt.png');
            background-repeat: no-repeat;
            background-position: right;
        }
        
        /* 버튼 요소에 기본적으로 설정되는 스타일 속성 초기화 */
        #slide > button {
            background-color: transparent;
            border: none;
            outline: none;
            padding: 0;
            cursor: pointer;
        }

        /* 웹 접근성을 향상시키기 위해 추가한 span 요소가 보이지 않도록 설정 */
        #slide > button > span {
            position: absolute;
            display: block;
            width: 1px;
            height: 1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
        }

    </style>
    <script>
        $(function(){
            const $slide = $('#slide > ul');
            const $prev = $('#prev');
            const $next = $('#next');
            const INTERVAL = 2000;
            let now = 0;
            
            let timerID = window.setInterval(slideImage, INTERVAL);


            // 슬라이드가 넘어가는 기능
            function slideImage(){

                $slide.animate({marginLeft: '-100%'}, function(){
                    $slide.removeAttr('style');
                    $slide.children(':first').appendTo(this);
                });
            };

            // 슬라이드가 마우스 포인터가 들어오거나 나갔을 때 멈춤, 재동작 기능
            // 이 때 부모한테 하는 이유는 좌 우 버튼을 누를때도 슬라이딩이 동작이 되어 이상해져서
            // 부모인 div한테 멈춤과 재동작 기능을 주면서 next, prev 버튼을 누를 때도 멈추게끔 만듦
            $slide.parent().on({
               mouseenter: function(){
                window.clearInterval(timerID);
               }, 
               mouseleave: function(){
                timerID = window.setInterval(slideImage, INTERVAL);
               }
            });

            // 슬라이드가 이전 이미지나 다음 이미지로 넘어가는 기능 
            // 이전 이미지인 마지막 자식 ul 요소를 첫 번째 자식 요소로 옮김
            $prev.on('click', function(){
                // $slide.children(':last').prependTo($slide);
                // 위에랑 같은 의미가 아래와 같음. 메소드 체이닝 가능. 위에 문장과는 pretendTo를 할 때 $slide가 주체인 객체가 아니라서 메소드 체이닝 불가능
                $slide.prepend($slide.children(':last'));
                $slide.css('margin-left', '-100%');
                $slide.animate({marginLeft: 0});
                // $slide.prepend($slide.children(':last')).css('margin-left', '-100%').animate({marginLeft: 0});
                // 이렇게 메소드 체이닝 가능
            });

            // next 버튼을 누른다는 건 슬라이드가 동작하던 것과 같은 방향으로 이동하는거라 slideImage 함수를 입력해주면 됨
            $next.on('click', slideImage);
        });
    </script>
</head>
<body>
    <!-- 이미지를 여러 장 나열 후 그 중 이미지 한 장만 보이도록 HTML
         이미지 슬라이드 처럼 순차적으로 돌아가면서 나오도록 JavaScript(문서 객체 이동과 animate 메서드 사용)
         이미지 영역에 마우스 포인터 올라가면 동작 중지, 벗어나면 재동작
         다음 이미지와 이전 이미지로 넘어가는 기능 추가
    -->

    <div id="slide">
        <ul>
            <li><img src="https://i.imgur.com/7Mu8BZg.png" alt="슬라이드1"></li>
            <li><img src="https://i.imgur.com/kwD72gU.png" alt="슬라이드2"></li>
            <li><img src="https://i.imgur.com/qOU9yuQ.png" alt="슬라이드3"></li>
            <li><img src="https://i.imgur.com/YfsvbdE.png" alt="슬라이드4"></li>
            <li><img src="https://i.imgur.com/3KWpPQv.png" alt="슬라이드5"></li>
        </ul>
        <button type="button" id="prev">
            <span>prev slide</span>
        </button>
        <button type="button" id="next">
            <span>next slide</span>
        </button>
    </div>
</body>
</html>